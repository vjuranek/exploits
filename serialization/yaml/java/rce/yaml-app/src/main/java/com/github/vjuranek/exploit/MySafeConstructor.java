package com.github.vjuranek.exploit;

import org.yaml.snakeyaml.constructor.Construct;
import org.yaml.snakeyaml.constructor.SafeConstructor;
import org.yaml.snakeyaml.nodes.Node;
import org.yaml.snakeyaml.nodes.Tag;

public class MySafeConstructor extends SafeConstructor {

    public MySafeConstructor() {
        super();
        this.yamlConstructors.put(new Tag(Tag.PREFIX + "app_class"), new ConstructSomeAppObject());
    }

    protected class ConstructSomeAppObject implements Construct {

        @Override
        public SomeAppClass construct(Node node) {
            return new SomeAppClass();
        }

        @Override
        public void construct2ndStep(Node node, Object object) {
            // No recursive structures.
        }
    }
}
